<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <script>
        // 重建二叉树
        // 根据前序和中序，还原二叉树

        function BinaryTree(value) {
            this.value = value;
            this.left = null;
            this.right = null;
        }

        // 前序
        var pre = [1, 2, 4, 7, 3, 5, 6, 8]
        // 中序
        var zhong = [4, 7, 2, 1, 3, 5, 8, 6]

        function reBuildBinaryTree(pre, zhong) {
            if (pre == null && zhong == null || pre.length === 0 || zhong.length === 0 || pre.length !== zhong.length) {
                return null;
            }
            var root = new BinaryTree(pre[0]);
            var index = zhong.indexOf(root.value);
            var newZhongL = zhong.slice(0, index);
            var newPreL = pre.slice(1, index + 1);
            var newZhongR = zhong.slice(index + 1, zhong.length);
            var newPreR = pre.slice(index + 1, pre.length);
            root.left = reBuildBinaryTree(newPreL, newZhongL);
            root.right = reBuildBinaryTree(newPreR, newZhongR);
            return root;
        }

        var buildTree = function (preorder, inorder) {
            if (preorder == null || inorder == null || preorder.length === 0 || inorder.length === 0 || preorder
                .length !== inorder.length) {
                return [];
            }
            let node = preorder[0];
            let root = new BinaryTree(node);
            let mid = inorder.indexOf(node);
            let leftPre = preorder.slice(1, mid + 1);
            let rightPre = preorder.slice(mid + 1, preorder.length);
            let leftIn = inorder.slice(0, mid);
            let rightIn = inorder.slice(mid + 1, inorder.length);
            root.left = buildTree(leftPre, leftIn);
            root.right = buildTree(rightPre, rightIn);
            return root;
        };
        const result = buildTree(pre, zhong);
        console.log(result);
    </script>
</body>

</html>