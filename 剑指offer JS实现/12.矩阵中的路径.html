<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
  </head>

  <body>
    <script>
      // 矩阵中的路径

      var arr = [
        ["a", "b", "t", "g"],
        ["c", "f", "c", "s"],
        ["j", "d", "e", "h"]
      ];

      var str = "acjdec";

      function hasPath(arr, row, col, str) {
        if (
          arr == null ||
          arr.length === 0 ||
          row < 1 ||
          col < 1 ||
          str === null ||
          str == ""
        ) {
          return false;
        }
        const pathIndex = 0;
        const stack = {};
        for (let i = 0; i < row; i++) {
          for (let j = 0; j < col; j++) {
            if (hasPathCore(arr, row, col, i, j, str, pathIndex, stack)) {
              return true;
            }
          }
        }
        return false;
      }

      function hasPathCore(arr, rows, cols, row, col, str, pathIndex, stack) {
        if (pathIndex == str.length) {
          return true;
        }
        let hasPath = false;
        if (
          row >= 0 &&
          row < rows &&
          col >= 0 &&
          col < cols &&
          arr[row][col] === str[pathIndex] &&
          !stack[row + "_" + col]
        ) {
          ++pathIndex;
          stack[row + "_" + col] = true;
          hasPath =
            hasPathCore(arr, rows, cols, row, col - 1, str, pathIndex, stack) ||
            hasPathCore(arr, rows, cols, row - 1, col, str, pathIndex, stack) ||
            hasPathCore(arr, rows, cols, row, col + 1, str, pathIndex, stack) ||
            hasPathCore(arr, rows, cols, row + 1, col, str, pathIndex, stack);
          if (!hasPath) {
            --pathIndex;
            stack[row + "_" + col] = false;
          }
        }
        console.log(stack);
        return hasPath;
      }

      const result = hasPath(arr, 3, 4, str);
      console.log(result);
    </script>
  </body>
</html>
